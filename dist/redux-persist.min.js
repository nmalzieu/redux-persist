!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ReduxPersist=e.ReduxPersist||{})}(this,function(e){"use strict";function t(e){var t=N.call(e,C),r=e[C];try{e[C]=void 0;var n=!0}catch(e){}var o=q.call(e);return n&&(t?e[C]=r:delete e[C]),o}function r(e){return F.call(e)}function n(e){return null==e?void 0===e?D:M:G&&G in Object(e)?t(e):r(e)}function o(e){return null!=e&&"object"==typeof e}function i(e){if(!o(e)||n(e)!=U)return!1;var t=H(e);if(null===t)return!0;var r=V.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Q.call(r)==W}function u(e){return!!e&&("object"===(void 0===e?"undefined":X(e))&&("function"!=typeof e.asMutable&&!!i(e)))}function s(){function e(e){var n=!1,o=[];return function(i,u){if(u.type!==E)return t.log&&!n&&o.push(u),e(i,u);t.log&&!n&&c(o),n=!0;var s=u.payload,a=e(i,u);return r(i,s,a,t.log)}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.stateReconciler||a;return function(t){return function(r,n,o){var i=t(e(r),n,o);return Z({},i,{replaceReducer:function(t){return i.replaceReducer(e(t))}})}}}function c(e){var t=e.slice(1);t.length>0&&console.log("\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\n      after rehydration:\n    ",t.length,t)}function a(e,t,r,n){var o=Z({},r);return Object.keys(t).forEach(function(i){if(e.hasOwnProperty(i)){if("object"===X(e[i])&&!t[i])return void(n&&console.log("redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.",i));if(e[i]!==r[i])return n&&console.log("redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.",i),void(o[i]=r[i]);o[i]=u(t[i])&&u(e[i])?Z({},e[i],t[i]):t[i],n&&console.log("redux-persist/autoRehydrate: key `%s`, rehydrated to ",i,o[i])}}),o}function l(e){if("object"!==("undefined"==typeof window?"undefined":X(window))||!(e in window))return!1;try{var t=window[e],r="redux-persist "+e+" test";t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(t){return console.warn("redux-persist "+e+" test failed, persistence will be disabled."),!1}return!0}function f(){return l("localStorage")}function d(){return l("sessionStorage")}function y(e){return"local"===e?f()?window.localStorage:{getItem:te,setItem:te,removeItem:te,getAllKeys:te}:"session"===e?d()?window.sessionStorage:{getItem:te,setItem:te,removeItem:te,getAllKeys:te}:void 0}function p(e,t){var r=e.storage,n=void 0!==e.keyPrefix?e.keyPrefix:A;if(Array.isArray(e))throw Error("redux-persist: purgeStoredState requires config as a first argument (found array). An array of keys is the optional second argument.");if(!r)throw Error("redux-persist: config.storage required in purgeStoredState");return void 0===t?new Promise(function(t,o){r.getAllKeys(function(r,i){r?(console.warn("redux-persist: error during purgeStoredState in storage.getAllKeys"),o(r)):t(p(e,i.filter(function(e){return 0===e.indexOf(n)}).map(function(e){return e.slice(n.length)})))})}):Promise.all(t.map(function(e){return r.removeItem(""+n+e,g(e))}))}function g(e){return function(t){t&&console.warn("Error storing data for key:",e,t)}}function h(e,t){function r(e){return(!c||-1!==c.indexOf(e))&&-1===s.indexOf(e)}function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return r.serial?y(t,function(e,t){try{var r=u(e),o=a.reduceRight(function(e,r){return r.out(e,t)},r);n=h(n,t,o)}catch(r){console.warn('Error rehydrating data for key "'+t+'"',e,r)}}):n=t,e.dispatch(x(n)),n}function o(e){return""+f+e}var i=!1===t.serialize?function(e){return e}:v,u=!1===t.serialize?function(e){return e}:b,s=t.blacklist||[],c=t.whitelist||!1,a=t.transforms||[],l=t.debounce||!1,f=void 0!==t.keyPrefix?t.keyPrefix:A,d=t._stateInit||{},y=t._stateIterator||S,g=t._stateGetter||w,h=t._stateSetter||O,k=t.storage||re("local");k.keys&&!k.getAllKeys&&(k.getAllKeys=k.keys);var j=d,I=!1,P=[],R=null;return e.subscribe(function(){if(!I){var t=e.getState();y(t,function(e,n){r(n)&&g(j,n)!==g(t,n)&&-1===P.indexOf(n)&&P.push(n)}),null===R&&(R=setInterval(function(){if(0===P.length)return clearInterval(R),void(R=null);var t=P.shift(),r=o(t),n=a.reduce(function(e,r){return r.in(e,t)},g(e.getState(),t));void 0!==n&&(console.log("[redux-persist] Launching setItem..."),k.setItem(r,i(n),m(t)))},l)),j=t}}),{rehydrate:n,pause:function(){I=!0},resume:function(){I=!1},purge:function(e){return p({storage:k,keyPrefix:f},e)}}}function m(e){return function(t){t&&console.warn("Error storing data for key:",e,t)}}function v(e){return ne(e,null,null,function(e,t){return null})}function b(e){return JSON.parse(e)}function x(e){return{type:E,payload:e}}function S(e,t){return Object.keys(e).forEach(function(r){return t(e[r],r)})}function w(e,t){return e[t]}function O(e,t,r){return e[t]=r,e}function k(e,t){function r(e){return!(!o||-1!==o.indexOf(e))||!(!i||-1===i.indexOf(e))}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.whitelist||null,i=n.blacklist||null;return{in:function(t,n){return!r(n)&&e?e(t,n):t},out:function(e,n){return!r(n)&&t?t(e,n):e}}}function j(e,t){function r(e,t){var r=null;try{var n=s(t);r=l.reduceRight(function(t,r){return r.out(t,e)},n)}catch(t){console.warn("redux-persist/getStoredState: Error restoring data for key:",e,t)}return r}function n(e,r){t(e,r)}function o(e){return(!a||-1!==a.indexOf(e))&&-1===c.indexOf(e)}function i(e){return""+f+e}var u=e.storage||re("local"),s=!1===e.serialize?function(e){return e}:I,c=e.blacklist||[],a=e.whitelist||!1,l=e.transforms||[],f=void 0!==e.keyPrefix?e.keyPrefix:A;u.keys&&!u.getAllKeys&&(u=Z({},u,{getAllKeys:u.keys}));var d={},y=0;if(u.getAllKeys(function(e,t){e&&(console.warn("redux-persist/getStoredState: Error in storage.getAllKeys"),n(e));var s=t.filter(function(e){return 0===e.indexOf(f)}).map(function(e){return e.slice(f.length)}),c=s.filter(o),a=c.length;0===a&&n(null,d),c.forEach(function(e){u.getItem(i(e),function(t,o){t?console.warn("redux-persist/getStoredState: Error restoring data for key:",e,t):d[e]=r(e,o),(y+=1)===a&&n(null,d)})})}),"function"!=typeof t&&Promise)return new Promise(function(e,r){t=function(t,n){t?r(t):e(n)}})}function I(e){return JSON.parse(e)}function P(e){function t(e,t){u.resume(),n&&n(e,t)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=!r.skipRestore;r.skipRestore&&console.warn("redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead");var i=null,u=h(e,r);return u.pause(),ee(o?function(){j(r,function(r,n){if(r)return void t(r);i&&("*"===i?n={}:i.forEach(function(e){return delete n[e]}));try{e.dispatch(R(n,r))}finally{t(r,n)}})}:t),Z({},u,{purge:function(e){return i=e||"*",u.purge(e)}})}function R(e){return{type:E,payload:e,error:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}var A="reduxPersist:",E="persist/REHYDRATE",K="object"==typeof global&&global&&global.Object===Object&&global,z="object"==typeof self&&self&&self.Object===Object&&self,T=K||z||Function("return this")(),_=T.Symbol,L=Object.prototype,N=L.hasOwnProperty,q=L.toString,C=_?_.toStringTag:void 0,J=Object.prototype,F=J.toString,M="[object Null]",D="[object Undefined]",G=_?_.toStringTag:void 0,H=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),U="[object Object]",Y=Function.prototype,B=Object.prototype,Q=Y.toString,V=B.hasOwnProperty,W=Q.call(Object),X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$="undefined"!=typeof global&&void 0!==global.setImmediate,ee=$?function(e,t){return global.setImmediate(e,t)}:function(e,t){return setTimeout(e,t)},te=function(){return null};te=function(){return console.error("redux-persist asyncLocalStorage requires a global localStorage object. Either use a different storage backend or if this is a universal redux application you probably should conditionally persist like so: https://gist.github.com/rt2zz/ac9eb396793f95ff3c3b"),null};var re=function(e,t){var r=y(e);return{getAllKeys:function(e){return new Promise(function(t,n){try{for(var o=[],i=0;r.length>i;i++)o.push(r.key(i));ee(function(){e&&e(null,o),t(o)})}catch(t){e&&e(t),n(t)}})},getItem:function(e,t){return new Promise(function(n,o){try{var i=r.getItem(e);ee(function(){t&&t(null,i),n(i)})}catch(e){t&&t(e),o(e)}})},setItem:function(e,t,n){return new Promise(function(o,i){try{r.setItem(e,t),ee(function(){n&&n(null),o()})}catch(e){n&&n(e),i(e)}})},removeItem:function(e,t){return new Promise(function(n,o){try{r.removeItem(e),ee(function(){t&&t(null),n()})}catch(e){t&&t(e),o(e)}})}}},ne=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){function r(e,t,r,o){return JSON.stringify(e,n(t,o),r)}function n(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var u=r.indexOf(this);~u?r.splice(u+1):r.push(this),~u?n.splice(u,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}t=e.exports=r,t.getSerialize=n}),oe=function(e,t,r){console.error('redux-persist: this method of importing storages has been removed. instead use `import { asyncLocalStorage } from "redux-persist/storages"`'),"function"==typeof e&&e(),"function"==typeof t&&t(),"function"==typeof r&&r()},ie={getAllKeys:oe,getItem:oe,setItem:oe,removeItem:oe},ue={asyncLocalStorage:ie,asyncSessionStorage:ie};e.autoRehydrate=s,e.createPersistor=h,e.createTransform=k,e.getStoredState=j,e.persistStore=P,e.purgeStoredState=p,e.storages=ue,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=redux-persist.min.js.map
